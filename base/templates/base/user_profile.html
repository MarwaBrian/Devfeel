{% extends 'main.html' %}

<!-- start block -->
{% block content %}
<main>
  <div class="user-profile">
    <div class="user-profile-head">
      <div>
        <h3>{{user.name}}</h3>
      </div>
      <div>
        <p>{{user.bio}}</p>
      </div>
      <hr />

      <div class="search-posts">
        <form action="{% url 'user-profile' user.id %}">
          <input name="search" type="search" id="search-home" placeholder="search" />
          <button type="submit">Search</button>
        </form>
      </div>

      {% if request.GET.search %}
      <div class="search-results-header">
        <p>Results for <span>'{{request.GET.search}}'</span></p>
        <a href="{% url 'user-profile' user.id %}">Show all</a>
      </div>
      {%else%}
      <div>
        <h3>Posts</h3>
      </div>
      {%endif%}
    </div>
    <div class="user-profile-posts-container">
      <div>
        {% for post in posts %}
        <div class="user-profile post">
          <a href="{% url 'post-details' pk=post.id %}">
            <h3>{{post.topic}}</h3>
          </a>
          <h4>{{post.description}}</h4>
          <p>{{post.body|safe}}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</main>
{% endblock content %}
